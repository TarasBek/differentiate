!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common"],n):n(e.differentiate={},e.ng.core,e.ng.common)}(this,function(e,n,t){"use strict";var i={literal:1,pair:2,json:3,array:4};i[i.literal]="literal",i[i.pair]="pair",i[i.json]="json",i[i.array]="array";var o={"default":1,typeChanged:2,nameChanged:3,valueChanged:4,added:5,removed:6};o[o["default"]]="default",o[o.typeChanged]="typeChanged",o[o.nameChanged]="nameChanged",o[o.valueChanged]="valueChanged",o[o.added]="added",o[o.removed]="removed";var r=function(){function e(){}return e.prototype.generateNodeId=function(){return Math.floor(1e4*Math.random())+1},e.prototype.transformNodeToInternalStruction=function(e){var n=this,t=e;if(e instanceof Array){var r=[];e.map(function(e,t){var d=n.transformNodeToInternalStruction(e);d instanceof Array?r.push({id:n.generateNodeId(),index:t,name:"",value:"",parent:i.array,type:i.array,status:o["default"],children:d}):r.push({id:n.generateNodeId(),index:t,name:"",value:d,parent:i.array,type:i.literal,status:o["default"],children:[]})}),t=r}else if(e instanceof Object){var d=Object.keys(e),l=[];d.map(function(t,r){var d=n.transformNodeToInternalStruction(e[t]);d instanceof Array?l.push({id:n.generateNodeId(),index:r,name:t,value:"",parent:i.json,type:i.array,status:o["default"],children:d}):l.push({id:n.generateNodeId(),index:r,name:t,value:d,parent:i.json,type:i.pair,status:o["default"],children:[]})}),t=l}return t},e.prototype.itemInArray=function(e,n){var t,o=n.type===i.literal?n.value.toUpperCase():n.name;return e.map(function(e){e.type===i.literal?e.value.toUpperCase()===o&&(t=e):e.name===o&&(t=e)}),t},e.prototype.leftItemFromRightItem=function(e,n){var t;if(!e||!n)return t;var o=n.type===i.literal?n.value.toUpperCase():n.name;return e.type===i.literal?e.value.toUpperCase()===o&&(t=e):e.name===o&&(t=e),t},e.prototype.compare=function(e,n){e.type!==n.type?(e.status=o.typeChanged,n.status=o.typeChanged):e.type===i.literal?e.value!==n.value&&(e.status=o.valueChanged,n.status=o.valueChanged):e.type===i.pair?(e.name!==n.name&&(e.status=o.nameChanged,n.status=o.nameChanged),e.value!==n.value&&(e.status=o.valueChanged,n.status=o.valueChanged)):e.name!==n.name?(e.status=o.nameChanged,n.status=o.nameChanged):this.unify(e.children,n.children)},e.prototype.reIndex=function(e){var n=this;e.map(function(e,t){e.index=t,n.reIndex(e.children)})},e.prototype.copyInto=function(e,n,t,i){var o=JSON.parse(JSON.stringify(n));e.splice(t,0,o),this.reIndex(e),n.status=i,o.status=i},e.prototype.unify=function(e,n){for(var t=0,i=0,r=!0;r;){var d,l=t<e.length?this.itemInArray(n,e[t]):undefined,a=i<n.length?this.itemInArray(e,n[i]):undefined;if(!l&&t<e.length)if(n.length)this.copyInto(n,e[t],t,o.removed),i++,t++;else for(;t<e.length;)this.copyInto(n,e[t],t,o.removed),i++,t++;if(!a&&i<n.length)if(e.length)this.copyInto(e,n[i],i,o.added),i++,t++;else for(;i<n.length;)this.copyInto(e,n[i],i,o.added),i++,t++;if(l||(l=i<n.length?n[i]:undefined),a||(a=t<e.length?e[t]:undefined),a&&a.index!==i)for(;i<n.length;){if(a=this.leftItemFromRightItem(e[i],n[i])){a=t<e.length?e[t]:undefined;break}this.copyInto(e,n[i],i,o.added),i++,t++}if(l&&l.index!==t)for(;t<e.length;){if(l=this.leftItemFromRightItem(n[t],e[t])){l=i<n.length?n[i]:undefined;break}this.copyInto(n,e[t],t,o.removed),i++,t++}if(a&&i<n.length)(d=this.itemInArray(e,n[i]))&&d.index!==a.index&&(this.copyInto(n,e[t],t,o.removed),i++,a=++t<e.length?e[t]:undefined);if(l&&t<e.length)(d=this.itemInArray(n,e[t]))&&d.index!==l.index&&(this.copyInto(e,n[i],i,o.added),t++,l=++i<n.length?n[i]:undefined);l&&a&&(this.compare(l,a),i++,t++),r=t<e.length&&i<n.length}},e.prototype.toInternalStruction=function(e,n){var t={leftSide:this.transformNodeToInternalStruction(e),rightSide:this.transformNodeToInternalStruction(n)};return this.unify(t.leftSide,t.rightSide),t},e.prototype.ngOnChanges=function(e){e.leftSideObject&&this.ngOnInit(),e.rightSideObject&&this.ngOnInit()},e.prototype.ngOnInit=function(){if(this.leftSideObject&&this.rightSideObject){var e=this.toInternalStruction(this.leftSideObject,this.rightSideObject);this.leftSide=[{id:this.generateNodeId(),name:"",value:"Root Object",parent:i.array,type:i.array,expanded:!0,isRoot:!0,children:e.leftSide}],this.rightSide=[{id:this.generateNodeId(),name:"",value:"Root Object",parent:i.array,type:i.array,expanded:!0,isRoot:!0,children:e.rightSide}]}},e.prototype.onhover=function(e){"left-side"==e.side?this.rightSide[0].children[e.index].hover=e.hover:this.leftSide[0].children[e.index].hover=e.hover},e}();r.decorators=[{type:n.Component,args:[{selector:"differentiate",template:'<differentiate-tree\n    class="root"\n    level="0"\n    side="left-side"\n    (onhover)="onhover($event)"\n    [children]="leftSide"></differentiate-tree>\n<differentiate-tree\n    class="root"\n    level="0"\n    side="right-side"\n    (onhover)="onhover($event)"\n    [children]="rightSide"></differentiate-tree>\n',styles:[":host{\n  border:1px solid #444;\n  -webkit-box-sizing:border-box;\n          box-sizing:border-box;\n  display:block;\n  max-width:100vw;\n  max-height:300px;\n  overflow-y:auto;\n  position:relative;\n  width:100%; }\n"]}]}],r.ctorParameters=function(){return[]},r.propDecorators={leftSideObject:[{type:n.Input,args:["leftSideObject"]}],rightSideObject:[{type:n.Input,args:["rightSideObject"]}]};var d=function(){function e(){this.onhover=new n.EventEmitter,this.level="0"}return e.prototype.ngOnInit=function(){this.depth=parseInt(this.level)},e.prototype.bubleup=function(e){e.side=this.side,this.onhover.emit(e)},e.prototype.mouseOvered=function(e,n){1===this.depth&&this.onhover.emit({hover:e,index:n,side:this.side})},e}();d.decorators=[{type:n.Component,args:[{selector:"differentiate-tree",template:'<ul [class]="side">\n  <li  *ngFor="let child of children"\n    (mouseout)="mouseOvered(false, child.index)"\n    (mouseover)="mouseOvered(true, child.index)"\n    [class.hover]="child.hover"\n    [class.added]="child.status === 5"\n    [class.removed]="child.status === 6"\n    [class.type-changed]="child.status === 2"\n    [class.name-changed]="child.status === 3"\n    [class.value-changed]="child.status === 4">\n    <div class=\'tree-node\'\n        [ngClass]="\'depth-\' + depth"\n        [id] = "child.id">\n      <span *ngIf=\'child.name && child.name!=null\'\n        class=\'name\'\n        [innerHTML]="child.name.length ? child.name : \'&nbsp;\'">\n      </span>\n      <span *ngIf=\'child.value && child.value!=null\'\n        class=\'value\'\n        [class.string]="depth > 0 && child.value && child.value.length"\n        [innerHTML]="child.value ? child.value : \'&nbsp;\'">\n      </span>\n    </div>\n    <differentiate-tree *ngIf="child.children.length"\n        [level]="depth+1"\n        (onhover)="bubleup($event)"\n        [class.child-node]="child.parent != 4"\n        [children]=\'child.children\'></differentiate-tree>\n    <div class="upper" *ngIf="child.status > 2"></div>\n    <div class="lower" *ngIf="child.status > 2"></div>\n  </li>\n</ul>\n',styles:[":host{\n  -webkit-box-sizing:border-box;\n          box-sizing:border-box;\n  display:inline-block;\n  width:100%; }\n:host.root{\n  float:left;\n  width:50%; }\n:host.child-node{\n  float:left; }\nul{\n  -webkit-box-sizing:border-box;\n          box-sizing:border-box;\n  list-style:none;\n  padding:0;\n  width:100%; }\n  ul li .hover{\n    background-color:#ddd; }\n  ul.undefined li:hover{\n    background-color:#ddd; }\n  ul.left-side{\n    border-right:1px solid #444;\n    display:inline-block;\n    margin:0; }\n    ul.left-side li{\n      position:relative;\n      display:table;\n      width:100%; }\n      ul.left-side li.added .name, ul.left-side li.added .value{\n        opacity:0.2;\n        font-style:italic; }\n      ul.left-side li.added .upper{\n        border:1px solid #4a4;\n        border-top-width:0;\n        border-left-width:0;\n        border-radius:0 0 100% 0;\n        -webkit-box-sizing:border-box;\n                box-sizing:border-box;\n        height:50%;\n        position:absolute;\n        pointer-events:none;\n        width:50%;\n        top:0;\n        right:0; }\n      ul.left-side li.added .lower{\n        border:1px solid #4a4;\n        border-bottom-width:0;\n        border-left-width:0;\n        border-radius:0 100% 0 0;\n        -webkit-box-sizing:border-box;\n                box-sizing:border-box;\n        height:50%;\n        position:absolute;\n        pointer-events:none;\n        width:50%;\n        bottom:0;\n        right:0; }\n      ul.left-side li.removed .upper{\n        -webkit-box-sizing:border-box;\n                box-sizing:border-box;\n        height:100%;\n        position:absolute;\n        width:66px;\n        top:0;\n        right:0;\n        pointer-events:none; }\n        ul.left-side li.removed .upper:after{\n          content:' - ';\n          color:#f00;\n          float:right;\n          padding-right:10px;\n          font-size:20px;\n          line-height:16px; }\n      ul.left-side li.removed .lower{\n        display:none; }\n      ul.left-side li.removed .tree-node span{\n        color:#f00; }\n      ul.left-side li.type-changed .tree-node span{\n        color:#f00; }\n      ul.left-side li.name-changed .upper{\n        -webkit-box-sizing:border-box;\n                box-sizing:border-box;\n        height:100%;\n        position:absolute;\n        width:66px;\n        top:0;\n        right:0;\n        pointer-events:none; }\n        ul.left-side li.name-changed .upper:after{\n          content:' ~ ';\n          color:#00f;\n          font-weight:bold;\n          float:right;\n          padding-right:10px;\n          font-size:20px;\n          line-height:16px; }\n      ul.left-side li.name-changed .tree-node .name{\n        color:#00f; }\n      ul.left-side li.value-changed .upper{\n        -webkit-box-sizing:border-box;\n                box-sizing:border-box;\n        height:100%;\n        position:absolute;\n        pointer-events:none;\n        width:66px;\n        top:0;\n        right:0; }\n        ul.left-side li.value-changed .upper:after{\n          content:' ~ ';\n          color:#00f;\n          font-weight:bold;\n          float:right;\n          padding-right:10px;\n          font-size:20px;\n          line-height:16px; }\n      ul.left-side li.value-changed .tree-node .value{\n        color:#00f; }\n  ul.right-side{\n    border-left:1px solid #444;\n    display:inline-block;\n    margin:0; }\n    ul.right-side li{\n      position:relative;\n      display:table;\n      width:100%; }\n      ul.right-side li.added .upper{\n        -webkit-box-sizing:border-box;\n                box-sizing:border-box;\n        height:100%;\n        position:absolute;\n        pointer-events:none;\n        width:90%;\n        top:0;\n        left:0; }\n        ul.right-side li.added .upper:after{\n          content:'+';\n          color:#4a4;\n          font-weight:bold;\n          padding-left:5px;\n          font-size:20px;\n          line-height:16px; }\n      ul.right-side li.added .lower{\n        display:none; }\n      ul.right-side li.added .tree-node span{\n        color:#4a4; }\n      ul.right-side li.removed .name, ul.right-side li.removed .value{\n        -webkit-text-decoration-line:line-through;\n                text-decoration-line:line-through;\n        -webkit-text-decoration-color:#ff0600;\n                text-decoration-color:#ff0600; }\n      ul.right-side li.removed .upper{\n        border:1px solid #f00;\n        border-top-width:0;\n        border-right-width:0;\n        border-radius:0 0 0 100%;\n        -webkit-box-sizing:border-box;\n                box-sizing:border-box;\n        height:50%;\n        width:10%;\n        position:absolute;\n        pointer-events:none;\n        top:0; }\n      ul.right-side li.removed .lower{\n        border:1px solid #f00;\n        border-bottom-width:0;\n        border-right-width:0;\n        border-radius:100% 0 0 0;\n        -webkit-box-sizing:border-box;\n                box-sizing:border-box;\n        height:50%;\n        width:10%;\n        position:absolute;\n        pointer-events:none;\n        bottom:0; }\n      ul.right-side li.type-changed .tree-node span{\n        color:#f00; }\n      ul.right-side li.name-changed .upper{\n        -webkit-box-sizing:border-box;\n                box-sizing:border-box;\n        height:100%;\n        position:absolute;\n        pointer-events:none;\n        top:0;\n        left:0; }\n        ul.right-side li.name-changed .upper:before{\n          content:' ~ ';\n          color:#00f;\n          font-weight:bold;\n          float:right;\n          padding-left:5px;\n          font-size:20px;\n          line-height:16px; }\n      ul.right-side li.name-changed .tree-node .name{\n        color:#00f; }\n      ul.right-side li.value-changed .upper{\n        -webkit-box-sizing:border-box;\n                box-sizing:border-box;\n        height:100%;\n        position:absolute;\n        pointer-events:none;\n        top:0;\n        left:0; }\n        ul.right-side li.value-changed .upper:before{\n          content:' ~ ';\n          color:#00f;\n          font-weight:bold;\n          float:right;\n          padding-left:5px;\n          font-size:20px;\n          line-height:16px; }\n      ul.right-side li.value-changed .tree-node .value{\n        color:#00f; }\n  ul .tree-node{\n    -webkit-box-sizing:border-box;\n            box-sizing:border-box;\n    color:#7c9eb2;\n    display:table;\n    padding:0;\n    position:relative;\n    margin:0;\n    width:100%; }\n    ul .tree-node.depth-0{\n      padding-left:5px; }\n    ul .tree-node.depth-1{\n      padding-left:20px; }\n    ul .tree-node.depth-2{\n      padding-left:40px; }\n    ul .tree-node.depth-3{\n      padding-left:60px; }\n    ul .tree-node.depth-4{\n      padding-left:80px; }\n    ul .tree-node.depth-5{\n      padding-left:100px; }\n    ul .tree-node.depth-6{\n      padding-left:120px; }\n    ul .tree-node.depth-7{\n      padding-left:140px; }\n    ul .tree-node.depth-8{\n      padding-left:160px; }\n    ul .tree-node.depth-9{\n      padding-left:180px; }\n    ul .tree-node.depth-10{\n      padding-left:200px; }\n    ul .tree-node .name{\n      color:#444;\n      font-weight:bold; }\n      ul .tree-node .name:after{\n        content:':'; }\n    ul .tree-node .value.string:before{\n      content:'\"'; }\n    ul .tree-node .value.string:after{\n      content:'\"'; }\n"]}]}],d.ctorParameters=function(){return[]},d.propDecorators={onhover:[{type:n.Output,args:["onhover"]}],children:[{type:n.Input,args:["children"]}],side:[{type:n.Input,args:["side"]}],level:[{type:n.Input,args:["level"]}]};var l=function(){return function(){}}();l.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule],declarations:[r,d],exports:[r],entryComponents:[],providers:[],schemas:[n.CUSTOM_ELEMENTS_SCHEMA]}]}],l.ctorParameters=function(){return[]},e.DifferentiateComponent=r,e.DifferentiateTree=d,e.DifferentiateModule=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=differentiate.umd.min.js.map
